<div class="space-y-4">
  <div class="grid gap-2 md:grid-cols-2">
    <div>
      <div class="text-sm text-gray-300">選擇影片</div>
      <input type="file" accept="video/*" (change)="onFile($event)" class="block text-sm" />
    </div>
    <div>
      <div class="text-sm text-gray-300">選擇字幕（SRT 或 YouTube JSON）</div>
      <input type="file" accept=".srt,.json" (change)="onSubtitleFile($event)" class="block text-sm" />
    </div>
  </div>

  <div class="relative">
    <video #video *ngIf="src() as url"
           class="w-full max-h-[60vh] bg-black"
           [src]="url" controls
           (timeupdate)="onTimeUpdate()"
           (play)="onPlay()"
           (pause)="onPause()"></video>

    <app-subtitle-display
      [currentSubtitle]="currentSubtitle()"
      [fontSize]="20"
      position="bottom"
      positionStyle="absolute"
    />
  </div>

  <div class="flex items-center gap-2">
    <span class="text-sm text-gray-300">速度</span>
    <button class="px-3 py-1.5 rounded-xl bg-gray-700 text-white" (click)="setRate(0.75)">0.75x</button>
    <button class="px-3 py-1.5 rounded-xl bg-gray-700 text-white" (click)="setRate(1)">1x</button>
    <button class="px-3 py-1.5 rounded-xl bg-gray-700 text-white" (click)="setRate(1.25)">1.25x</button>
    <button class="px-3 py-1.5 rounded-xl bg-gray-700 text-white" (click)="setRate(1.5)">1.5x</button>
    <button class="px-3 py-1.5 rounded-xl bg-gray-700 text-white" (click)="setRate(2)">2x</button>
  </div>

  <app-subtitle-scroll
    [subtitles]="subtitles()"
    [currentTime]="currentTime()"
    [isPlaying]="isPlaying()"
    [videoId]="videoId()"
    (seekTo)="seekTo($event)"
  />
</div>
