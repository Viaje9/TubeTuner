<div class="h-[calc(100dvh-140px)] flex flex-col">
  <!-- 標題 -->
  <div class="pb-4 border-b border-gray-800 mb-4">
    <div class="flex items-center justify-between">
      <h1 class="text-2xl font-bold">AI 對話</h1>
      <div class="flex items-center gap-2">
        <button
          (click)="onBack()"
          class="px-3 py-1 bg-gray-700 hover:bg-gray-600 text-white rounded-lg"
        >
          返回
        </button>
      </div>
    </div>

    <!-- 訊息區 -->
    <div class="flex-1 overflow-y-auto px-1">
      <div class="space-y-4 max-w-4xl mx-auto">
        <div
          *ngFor="let m of state.messages()"
          [class]="'flex ' + (m.role === 'user' ? 'justify-end' : 'justify-start')"
        >
          <div
            [class]="
              'max-w-[80%] rounded-lg p-4 text-sm ' +
              (m.role === 'user'
                ? 'bg-blue-600 text-white'
                : 'bg-gray-800 text-gray-100 border border-gray-700')
            "
          >
            {{ m.content }}
          </div>
        </div>
      </div>
    </div>

    <!-- 輸入區 -->
    <div class="pt-4 border-t border-gray-800">
      <div class="max-w-4xl mx-auto flex gap-2">
        <textarea
          [(ngModel)]="input"
          rows="1"
          placeholder="輸入您的訊息..."
          class="flex-1 px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
        ></textarea>
        <button class="px-4 py-3 bg-blue-600 text-white rounded-lg" (click)="send()">發送</button>
      </div>
    </div>
  </div>
</div>
